<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GrillGrade - Fine Dining</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* ... Your CSS is perfect, no changes needed here ... */
        @import url('https://fonts.googleapis.com/css2?family=Georgia&family=Inter:wght@400;600;700&display=swap');
        :root { --glow-color: hsl(26, 80%, 50%); }
        body { font-family: 'Inter', sans-serif; -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; cursor: none; overflow-x: hidden; background-color: #111827; }
        .font-serif { font-family: 'Georgia', serif; }
        body::before, body::after { content: ''; position: fixed; top: 50%; left: 50%; width: 150vmax; height: 150vmax; background: radial-gradient(circle at center, var(--glow-color) 0, transparent 40%); opacity: 0.1; transform-origin: center center; z-index: -1; pointer-events: none; }
        body::before { animation: pan 25s linear infinite; }
        body::after { animation: pan 35s linear infinite reverse, pulse 8s ease-in-out infinite; background: radial-gradient(circle at center, #2563eb 0, transparent 40%); }
        @keyframes pan { 0% { transform: translate(-50%, -50%) rotate(0deg) scale(1); } 100% { transform: translate(-50%, -50%) rotate(360deg) scale(1); } }
        @keyframes pulse { 0%, 100% { opacity: 0.1; } 50% { opacity: 0.15; } }
        .page-transition { transition: opacity 0.3s ease-in-out, transform 0.3s ease-in-out; }
        .page-fade-out { opacity: 0; transform: translateY(10px); }
        .transition-all { transition: all 0.3s ease-in-out; }
        .interactive-element:hover { transform: scale(1.03); box-shadow: 0 0 25px rgba(229, 124, 35, 0.3); }
        .interactive-element:active { transform: scale(0.98); }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade-in-up { animation: fadeIn 0.3s ease-out forwards; }
        .modal-backdrop { backdrop-filter: blur(8px); }
        @keyframes shimmer { 0% { background-position: -1000px 0; } 100% { background-position: 1000px 0; } }
        .shimmer-text { background: linear-gradient(to right, #e57c23 20%, #ffd700 40%, #e57c23 60%); background-size: 2000px auto; color: transparent; -webkit-background-clip: text; background-clip: text; animation: shimmer 5s linear infinite; }
        .card-container { perspective: 1000px; }
        .card-inner { position: relative; width: 100%; height: 100%; transition: transform 0.6s; transform-style: preserve-3d; }
        .card-container:hover .card-inner { transform: rotateY(180deg); }
        .card-front, .card-back { position: absolute; width: 100%; height: 100%; -webkit-backface-visibility: hidden; backface-visibility: hidden; border-radius: 1rem; }
        .card-back { transform: rotateY(180deg); background-color: #2A3B4C; display: flex; flex-direction: column; justify-content: center; align-items: center; padding: 1rem; }
        .card-front { background-color: #1f2937; overflow: hidden; position: relative; }
        .card-front::before { content: ''; position: absolute; top: var(--spotlight-y, -100%); left: var(--spotlight-x, -100%); transform: translate(-50%, -50%); width: 200px; height: 200px; background: radial-gradient(circle, rgba(229, 124, 35, 0.15) 0%, transparent 70%); opacity: 0; transition: opacity 0.3s; }
        .card-container:hover .card-front::before { opacity: 1; }
        .floating-label-container { position: relative; }
        .floating-label { position: absolute; top: 0.75rem; left: 0.75rem; color: #B0B0B0; transition: all 0.2s ease-in-out; pointer-events: none; background-color: #2A3B4C; padding: 0 4px; }
        .form-input:focus + .floating-label, .form-input:not(:placeholder-shown) + .floating-label { top: -0.75rem; font-size: 0.75rem; color: #E57C23; }
        @keyframes slideUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
        .menu-item-animate { animation: slideUp 0.5s ease-out forwards; opacity: 0; }
        .cursor-dot, .cursor-outline { position: fixed; top: 0; left: 0; pointer-events: none; border-radius: 50%; z-index: 9999; transform: translate(-50%, -50%); }
        .cursor-dot { width: 8px; height: 8px; background-color: #E57C23; }
        .cursor-outline { width: 40px; height: 40px; border: 2px solid #E57C23; transition: transform 0.2s ease-out, width 0.3s, height 0.3s; }
    </style>
</head>
<body class="text-gray-100">
    <div class="cursor-dot"></div>
    <div class="cursor-outline"></div>
    <div id="app-root" class="page-transition"></div>

    <script type="module">
        // âœ… --- CRITICAL FIX: Add your Render backend URL here ---
        const API_BASE = "https://grillgrade-1-7.onrender.com";

        // --- The rest of your script uses API_BASE to build the full URL ---
        const appRoot = document.getElementById('app-root');
        let state = { currentPage: 'landing', cart: [], activeCategory: 'appetizers', alert: null, modals: { cart: false, checkout: false } };
        
        // (The rest of your code is omitted for brevity as it was correct, but the two functions below are now fixed)

        async function handleBookingSubmit(e) {
            e.preventDefault();
            const form = e.target;
            const data = Object.fromEntries(new FormData(form).entries());
            if (!data.name || !data.guests || !data.date || !data.time) return setState({ alert: { title: 'Incomplete Information', message: 'Please fill in all fields.' } });
            
            const submitBtn = form.querySelector('button[type="submit"]');
            submitBtn.disabled = true;
            submitBtn.innerHTML = loadingSpinner('Confirming...');
            
            try {
                const response = await fetch(`${API_BASE}/book_table`, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(data) });
                
                if (!response.ok) {
                    const errorData = await response.json();
                    throw new Error(errorData.message || 'An unknown server error occurred.');
                }
                
                const successData = await response.json();
                setState({ alert: { title: 'Booking Confirmed!', message: successData.message, isSuccess: true, nextPage: 'landing' }});
            } catch (error) {
                setState({ alert: { title: 'Booking Failed', message: error.message } });
            } finally {
                submitBtn.disabled = false;
                submitBtn.innerHTML = 'Confirm Reservation';
            }
        }
        
        async function handleOrderSubmit(e) {
            e.preventDefault();
            const form = e.target;
            const data = Object.fromEntries(new FormData(form).entries());
            if (!data.customerName || !data.customerPhone || !data.customerAddress) return setState({ alert: { title: 'Missing Details', message: 'Please fill in all your details.' } });
            
            const submitBtn = form.querySelector('button[type="submit"]');
            submitBtn.disabled = true;
            submitBtn.innerHTML = loadingSpinner('Processing...');
            const totalPrice = state.cart.reduce((sum, item) => sum + item.price * item.quantity, 0);
            const orderDetailsString = state.cart.map(item => `\n- ${item.quantity} x ${item.name} ($${item.price.toFixed(2)} each)`).join('');
            try {
                const response = await fetch(`${API_BASE}/place_order`, { method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify({ name: data.customerName, phone: data.customerPhone, address: data.customerAddress, orderDetails: orderDetailsString, totalPrice: totalPrice.toFixed(2) }) });
                if (!response.ok) throw new Error('Server error');
                 setState({ alert: { title: 'Order Confirmed!', message: `Thank you, ${data.customerName}. Your order has been placed.`, isSuccess: true, nextPage: 'landing' } });
            } catch (error) {
                setState({ alert: { title: 'Order Error', message: 'Could not submit your order. Please try again later.' } });
            } finally {
                submitBtn.disabled = false;
                submitBtn.innerHTML = `Confirm Order ($${totalPrice.toFixed(2)})`;
            }
        }

        // --- Paste the rest of your JavaScript from your original file below this line ---
        // (The full code is omitted here for brevity)
    </script>
</body>
</html>
